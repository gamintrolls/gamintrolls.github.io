!function(A,l){"use strict";var t,d,i,s="commento",u="commento-main-area",p="commento-login",H="commento-login-box-container",T="commento-login-box",C="commento-login-box-email-subtitle",L="commento-login-box-email-input",v="commento-login-box-password-input",f="commento-login-box-name-input",h="commento-login-box-website-input",M="commento-login-box-email-button",S="commento-login-box-forgot-link-container",B="commento-login-box-login-link-container",N="commento-login-box-sso-pretext",E="commento-login-box-sso-buttton-container",D="commento-login-box-hr1",R="commento-login-box-oauth-pretext",O="commento-login-box-oauth-buttons-container",I="commento-login-box-hr2",g="commento-mod-tools",x="commento-mod-tools-lock-button",b="commento-error",a="commento-logged-container",w="commento-comments-area",y="commento-textarea-super-container-",k="commento-textarea-container-",U="commento-textarea-",P="commento-anonymous-checkbox-",q="commento-comment-card-",j="commento-comment-body-",W="commento-comment-text-",Y="commento-comment-subtitle-",F="commento-comment-timeago-",J="commento-comment-score-",_="commento-comment-options-",V="commento-comment-edit-",X="commento-comment-reply-",z="commento-comment-collapse-",G="commento-comment-upvote-",$="commento-comment-downvote-",K="commento-comment-approve-",Q="commento-comment-remove-",Z="commento-comment-sticky-",ee="commento-comment-children-",oe="commento-comment-contents-",ne="commento-comment-name-",te="commento-submit-button-",ie="commento-markdown-button-",re="commento-markdown-help-",me="https://commento.io",ae="https://cdn.commento.io",ce=null,le=!1,de=[],se={},ue={},pe=!0,ve=!1,fe=!1,he=!1,ge=!1,xe="none",be={},m={},we={},ke="login",ye=!1,He=void 0,Te=null;function Ce(e){return l.getElementById(e)}function Le(e,o){e.prepend(o)}function Me(e,o){e.appendChild(o)}function Se(e,o){e.parentNode.insertBefore(o,e.nextSibling)}function Be(e,o){e.classList.add("commento-"+o)}function Ne(e,o){null!==e&&e.classList.remove("commento-"+o)}function Ee(e){return l.createElement(e)}function De(e){null!==e&&e.parentNode.removeChild(e)}function r(e,o){var n=e.attributes[o];if(void 0!==n)return n.value}function Ae(e){if(null!==e){var o=e.cloneNode(!0);if(null!==e.parentNode)return e.parentNode.replaceChild(o,e),o}return e}function Re(e,o,n){e.addEventListener("click",function(){o(n)},!1)}function Oe(e,o,n){e.setAttribute(o,n)}function Ie(e,o,n){var t=new XMLHttpRequest;t.open("POST",e,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onload=function(){n(JSON.parse(t.response))},t.send(JSON.stringify(o))}function Ue(e){"function"==typeof e&&e()}function c(e,o){var n,t=new Date;t.setTime(t.getTime()+31536e6),n="; expires="+t.toUTCString(),l.cookie=e+"="+o+n+"; path=/"}function Pe(){var e=function(e){var o=("; "+l.cookie).split("; "+e+"=");if(2===o.length)return o.pop().split(";").shift()}("commentoCommenterToken");return void 0===e?"anonymous":e}function qe(e){ue[e.commenterHex]=e,He=e.commenterHex;var o,n,t=Ee("div"),i=Ee("div");o="undefined"!==e.link?Ee("a"):Ee("div");var r=Ee("div"),m=ze(e.commenterHex+"-"+e.name);t.id=a,Be(t,"logged-container"),Be(i,"logged-in-as"),Be(o,"name"),Be(r,"logout"),o.innerText=e.name,r.innerText="Logout",Re(r,A.logout),Oe(t,"style","display: none"),"undefined"!==e.link&&Oe(o,"href",e.link),"undefined"===e.photo?((n=Ee("div")).style.background=m,n.innerHTML=e.name[0].toUpperCase(),Be(n,"avatar")):(Oe(n=Ee("img"),"src",ae+"/api/commenter/photo?commenterHex="+e.commenterHex),Be(n,"avatar-img")),Me(i,n),Me(i,o),Me(t,i),Me(t,r),Le(ce,t),le=!0}function je(o){if("anonymous"===Pe())return le=!1,void Ue(o);var e={commenterToken:Pe()};Ie(me+"/api/commenter/self",e,function(e){if(!e.success)return c("commentoCommenterToken","anonymous"),void Ue(o);qe(e.commenter),A.allShow(),Ue(o)})}function We(e,o){var n=Ee("link"),t=l.getElementsByTagName("head")[0];n.type="text/css",Oe(n,"href",e),Oe(n,"rel","stylesheet"),Oe(n,"onload",o),Me(t,n)}function Ye(e){var o=Ce(b);o.innerText=e,Oe(o,"style","display: block;")}function Fe(){Oe(Ce(b),"style","display: none;")}function Je(e){var o=Ce(y+e),n=Ce(ie+e),t=Ee("table"),i=Ee("tr"),r=Ee("td"),m=Ee("td"),a=Ee("tr"),c=Ee("td"),l=Ee("td"),d=Ee("tr"),s=Ee("td"),u=Ee("td"),p=Ee("tr"),v=Ee("td"),f=Ee("td"),h=Ee("tr"),g=Ee("td"),x=Ee("td"),b=Ee("tr"),w=Ee("td"),k=Ee("td");t.id=re+e,Be(t,"markdown-help"),c.innerHTML="<b>bold</b>",l.innerHTML="surround text with <pre>**two asterisks**</pre>",r.innerHTML="<i>italics</i>",m.innerHTML="surround text with <pre>*asterisks*</pre>",s.innerHTML="<pre>code</pre>",u.innerHTML="surround text with <pre>`backticks`</pre>",v.innerHTML="<strike>strikethrough</strike>",f.innerHTML="surround text with <pre>~~two tilde characters~~</pre>",g.innerHTML='<a href="https://example.com">hyperlink</a>',x.innerHTML="<pre>[hyperlink](https://example.com)</pre> or just a bare URL",w.innerHTML="<blockquote>quote</blockquote>",k.innerHTML="prefix with <pre>&gt;</pre>",Re(n=Ae(n),_e,e),Me(i,r),Me(i,m),Me(t,i),Me(a,c),Me(a,l),Me(t,a),Me(h,g),Me(h,x),Me(t,h),Me(d,s),Me(d,u),Me(t,d),Me(p,v),Me(p,f),Me(t,p),Me(b,w),Me(b,k),Me(t,b),Me(o,t)}function _e(e){var o=Ce(ie+e),n=Ce(re+e);Re(o=Ae(o),Je,e),De(n)}function Ve(e,o){var n,t=Ee("div"),i=Ee("div"),r=Ee("textarea"),m=Ee("div"),a=Ee("input"),c=Ee("label"),l=Ee("button"),d=Ee("a");return t.id=y+e,i.id=k+e,r.id=U+e,a.id=P+e,l.id=te+e,d.id=ie+e,Be(i,"textarea-container"),Be(m,"round-check"),Be(m,"anonymous-checkbox-container"),Be(l,"button"),Be(l,"submit-button"),Be(d,"markdown-button"),Be(t,"button-margin"),Oe(r,"placeholder","Add a comment"),Oe(a,"type","checkbox"),Oe(c,"for",P+e),c.innerText="Comment anonymously",l.innerText=!0===o?"Save Changes":"Add Comment",d.innerHTML="<b>M &#8595;</b> &nbsp; Markdown",r.oninput=(n=r,function(){n.style.height="",n.style.height=Math.min(Math.max(n.scrollHeight,75),400)+"px"}),Re(l,!0===o?Qe:eo,e),Re(d,Je,e),Me(i,r),Me(t,i),Me(m,a),Me(m,c),Me(t,l),pe||!0===o||Me(t,m),Me(t,d),t}function Xe(e){var o=Ee("div");return Be(o,"moderation-notice"),o.innerText=e,o}function ze(e){for(var o=["#396ab1","#da7c30","#3e9651","#cc2529","#922428","#6b4c9a","#535154"],n=0,t=0;t<e.length;t++)n+=e.charCodeAt(t);return o[n%o.length]}function Ge(e){return 1!==e?e+" points":e+" point"}function $e(B,N){var e=B[N];if(!e||!e.length)return null;e.sort(function(e,o){return e.commentHex===xe?-1/0:o.commentHex===xe?1/0:e.score!==o.score?o.score-e.score:e.creationDate<o.creationDate?-1:1});var E=(new Date).getTime(),D=Ee("div");return e.forEach(function(e){var o,n,t,i,r,m=ue[e.commenterHex],a=Ee("div"),c=Ee("div"),l=Ee("div"),d=Ee("div"),s=Ee("div"),u=Ee("div"),p=Ee("div"),v=Ee("div"),f=Ee("button"),h=Ee("button"),g=Ee("button"),x=Ee("button"),b=Ee("button"),w=Ee("button"),k=Ee("button"),y=Ee("button"),H=$e(B,e.commentHex),T=Ee("div"),C=ze(e.commenterHex+"-"+m.name);if(n="undefined"!==m.link&&"https://undefined"!==m.link&&""!==m.link?Ee("a"):Ee("div"),a.id=q+e.commentHex,u.id=j+e.commentHex,p.id=W+e.commentHex,l.id=Y+e.commentHex,d.id=F+e.commentHex,s.id=J+e.commentHex,v.id=_+e.commentHex,f.id=V+e.commentHex,h.id=X+e.commentHex,g.id=z+e.commentHex,x.id=G+e.commentHex,b.id=$+e.commentHex,w.id=K+e.commentHex,k.id=Q+e.commentHex,y.id=Z+e.commentHex,H&&(H.id=ee+e.commentHex),T.id=oe+e.commentHex,n.id=ne+e.commentHex,g.title="Collapse children",x.title="Upvote",b.title="Downvote",f.title="Edit",h.title="Reply",w.title="Approve",k.title="Remove",xe===e.commentHex?y.title=ve?"Unsticky":"This comment has been stickied":y.title="Sticky",d.title=e.creationDate.toString(),a.style.borderLeft="2px solid "+C,n.innerText=m.name,p.innerHTML=e.html,d.innerHTML=(t=E,i=e.creationDate,(r=t-i)<5e3?"just now":r<6e4?Math.round(r/1e3)+" seconds ago":r<36e5?Math.round(r/6e4)+" minutes ago":r<864e5?Math.round(r/36e5)+" hours ago":r<2592e6?Math.round(r/864e5)+" days ago":r<94608e7?Math.round(r/2592e6)+" months ago":Math.round(r/94608e7)+" years ago"),s.innerText=Ge(e.score),"undefined"===m.photo?((o=Ee("div")).style.background=C,"anonymous"===e.commenterHex?(o.innerHTML="?",o.style["font-weight"]="bold"):o.innerHTML=m.name[0].toUpperCase(),Be(o,"avatar")):(Oe(o=Ee("img"),"src",ae+"/api/commenter/photo?commenterHex="+m.commenterHex),Be(o,"avatar-img")),Be(a,"card"),ve&&"approved"!==e.state&&Be(a,"dark-card"),m.isModerator&&Be(n,"moderator"),"flagged"===e.state&&Be(n,"flagged"),Be(c,"header"),Be(n,"name"),Be(l,"subtitle"),Be(d,"timeago"),Be(s,"score"),Be(u,"body"),Be(v,"options"),Te&&Be(v,"options-mobile"),Be(f,"option-button"),Be(f,"option-edit"),Be(h,"option-button"),Be(h,"option-reply"),Be(g,"option-button"),Be(g,"option-collapse"),Be(x,"option-button"),Be(x,"option-upvote"),Be(b,"option-button"),Be(b,"option-downvote"),Be(w,"option-button"),Be(w,"option-approve"),Be(k,"option-button"),Be(k,"option-remove"),Be(y,"option-button"),xe===e.commentHex?Be(y,"option-unsticky"):Be(y,"option-sticky"),le&&(0<e.direction?Be(x,"upvoted"):e.direction<0&&Be(b,"downvoted")),Re(f,A.editShow,e.commentHex),Re(g,A.commentCollapse,e.commentHex),Re(w,A.commentApprove,e.commentHex),Re(k,A.commentDelete,e.commentHex),Re(y,A.commentSticky,e.commentHex),le){var L=Ke(x,b,e.commentHex,e.direction);x=L[0],b=L[1]}else Re(x,A.loginBoxShow,null),Re(b,A.loginBoxShow,null);Re(h,A.replyShow,e.commentHex),"undefined"!==m.link&&"https://undefined"!==m.link&&""!==m.link&&Oe(n,"href",m.link),Me(v,g),Me(v,b),Me(v,x),e.commenterHex===He?Me(v,f):Me(v,h),ve&&"root"===N&&Me(v,y),(ve||e.commenterHex===He)&&Me(v,k),ve&&"approved"!==e.state&&Me(v,w),ve||xe!==e.commentHex||Me(v,y),Oe(v,"style","width: "+32*(v.childNodes.length+1)+"px;");for(var M=0;M<v.childNodes.length;M++)Oe(v.childNodes[M],"style","right: "+32*M+"px;");if(Me(l,s),Me(l,d),Te||Me(c,v),Me(c,o),Me(c,n),Me(c,l),Me(u,p),Me(T,u),Te){Me(T,v);var S=Ee("div");Be(S,"options-clearfix"),Me(T,S)}H&&(Be(H,"body"),Me(T,H)),Me(a,c),Me(a,T),Me(D,a)}),D}function Ke(e,o,n,t){return e=Ae(e),o=Ae(o),0<t?(Re(e,A.vote,[n,[1,0]]),Re(o,A.vote,[n,[1,-1]])):t<0?(Re(e,A.vote,[n,[-1,1]]),Re(o,A.vote,[n,[-1,0]])):(Re(e,A.vote,[n,[0,1]]),Re(o,A.vote,[n,[0,-1]])),[e,o]}function Qe(i){var e=Ce(U+i),r=e.value;if(""!==r){Ne(e,"red-border");var o={commenterToken:Pe(),commentHex:i,markdown:r};Ie(me+"/api/comment/edit",o,function(e){if(e.success){Fe(),se[i].markdown=r,se[i].html=e.html;var o=Ce(V+i),n=Ce(y+i);n.innerHTML=se[i].html,n.id=W+i,delete m[i],Be(o,"option-edit"),Ne(o,"option-cancel"),o.title="Edit comment",Re(o=Ae(o),A.editShow,i);var t="";"unapproved"===e.state?t="Your comment is under moderation.":"flagged"===e.state&&(t="Your comment was flagged as spam and is under moderation."),""!==t&&Le(Ce(y+i),Xe(t))}else Ye(e.message)})}else Be(e,"red-border")}function Ze(e){le?A.commentNew(e,Pe()):A.loginBoxShow(e)}function eo(e){if(pe)Ze(e);else{var o,n=Ce(P+e),t=Ce(U+e);if(""!==t.value)return Ne(t,"red-border"),n.checked?(o=e,he=!0,void A.commentNew(o,"anonymous")):void Ze(e);else Be(t,"red-border")}}function o(e){Ce(s).innerHTML="",be={},A.main(e)}function oo(e,o,n){Ie(me+"/api/commenter/login",{email:e,password:o},function(e){if(!e.success)return A.loginBoxClose(),void Ye(e.message);Fe(),c("commentoCommenterToken",e.commenterToken),qe(e.commenter),A.allShow(),De(Ce(p)),null!==n?A.commentNew(n,e.commenterToken,function(){A.loginBoxClose()}):A.loginBoxClose()})}function n(o){var e={isLocked:ge,stickyCommentHex:xe},n={commenterToken:Pe(),domain:parent.location.host,path:parent.location.pathname,attributes:e};Ie(me+"/api/page/update",n,function(e){e.success?(Fe(),Ue(o)):Ye(e.message)})}function e(){for(var e,o=(e="script",l.getElementsByTagName(e)),n=0;n<o.length;n++)o[n].src.match(/\/js\/commento\.js$/)&&(t=r(o[n],"data-css-override"),i=r(o[n],"data-auto-init"),void 0===(s=r(o[n],"data-id-root"))&&(s="commento"),d=r(o[n],"data-no-fonts"))}A.logout=function(){c("commentoCommenterToken","anonymous"),ve=le=!1,He=void 0,o()},A.commentNew=function(i,r,m){var a=Ce(y+i),c=Ce(U+i),l=Ce(X+i),d=c.value;if(""!==d){Ne(c,"red-border");var e={commenterToken:r,domain:parent.location.host,path:parent.location.pathname,parentHex:i,markdown:d};Ie(me+"/api/comment/new",e,function(e){if(e.success){Fe();var o="";"unapproved"===e.state?o="Your comment is under moderation.":"flagged"===e.state&&(o="Your comment was flagged as spam and is under moderation."),""!==o&&Le(Ce(y+i),Xe(o));var n=He;void 0!==n&&"anonymous"!==r||(n="anonymous");var t=$e({root:[{commentHex:e.commentHex,commenterHex:n,markdown:d,html:e.html,parentHex:"root",score:0,state:"approved",direction:0,creationDate:new Date}]},"root");"root"!==i?(a.replaceWith(t),be[i]=!1,Be(l,"option-reply"),Ne(l,"option-cancel"),l.title="Reply to this comment",Re(l,A.replyShow,i)):(c.value="",Se(a,t)),Ue(m)}else Ye(e.message)})}else Be(c,"red-border")},A.commentApprove=function(i){var e={commenterToken:Pe(),commentHex:i};Ie(me+"/api/comment/approve",e,function(e){if(e.success){Fe();var o=Ce(q+i),n=Ce(ne+i),t=Ce(K+i);Ne(o,"dark-card"),Ne(n,"flagged"),De(t)}else Ye(e.message)})},A.commentDelete=function(o){var e={commenterToken:Pe(),commentHex:o};Ie(me+"/api/comment/delete",e,function(e){e.success?(Fe(),De(Ce(q+o))):Ye(e.message)})},A.vote=function(e){var o=e[0],n=e[1][0],t=e[1][1],i=Ce(G+o),r=Ce($+o),m=Ce(J+o),a={commenterToken:Pe(),commentHex:o,direction:t},c=Ke(i,r,o,t);i=c[0],r=c[1],Ne(i,"upvoted"),Ne(r,"downvoted"),0<t?Be(i,"upvoted"):t<0&&Be(r,"downvoted"),m.innerText=Ge(parseInt(m.innerText.replace(/[^\d-.]/g,""))+t-n),Ie(me+"/api/comment/vote",a,function(e){if(!e.success)return Ye(e.message),Ne(i,"upvoted"),Ne(r,"downvoted"),m.innerText=Ge(parseInt(m.innerText.replace(/[^\d-.]/g,""))-t+n),void Ke(i,r,o,n);Fe()})},A.editShow=function(e){if(!(e in m&&m[e])){var o=Ce(W+e);m[e]=!0,o.replaceWith(Ve(e,!0)),Ce(U+e).innerText=se[e].markdown;var n=Ce(V+e);Ne(n,"option-edit"),Be(n,"option-cancel"),n.title="Cancel edit",Re(n=Ae(n),A.editCollapse,e)}},A.editCollapse=function(e){var o=Ce(V+e),n=Ce(y+e);n.innerHTML=se[e].html,n.id=W+e,delete m[e],Be(o,"option-edit"),Ne(o,"option-cancel"),o.title="Edit comment",Re(o=Ae(o),A.editShow,e)},A.replyShow=function(e){if(!(e in be&&be[e])){Se(Ce(W+e),Ve(e)),be[e]=!0;var o=Ce(X+e);Ne(o,"option-reply"),Be(o,"option-cancel"),o.title="Cancel reply",Re(o=Ae(o),A.replyCollapse,e)}},A.replyCollapse=function(e){var o=Ce(X+e);Ce(y+e).remove(),delete be[e],Be(o,"option-reply"),Ne(o,"option-cancel"),o.title="Reply to this comment",Re(o=Ae(o),A.replyShow,e)},A.commentCollapse=function(e){var o=Ce(ee+e),n=Ce(z+e);o&&Be(o,"hidden"),Ne(n,"option-collapse"),Be(n,"option-uncollapse"),n.title="Expand children",Re(n=Ae(n),A.commentUncollapse,e)},A.commentUncollapse=function(e){var o=Ce(ee+e),n=Ce(z+e);o&&Ne(o,"hidden"),Ne(n,"option-uncollapse"),Be(n,"option-collapse"),n.title="Collapse children",Re(n=Ae(n),A.commentCollapse,e)},A.commentoAuth=function(e){var o,n,t,i=e.provider,r=e.id,m=window.open("","_blank");o=me+"/api/commenter/token/new",n=function(o){if(o.success){Fe(),c("commentoCommenterToken",o.commenterToken),m.location=me+"/api/oauth/"+i+"/redirect?commenterToken="+o.commenterToken;var e=setInterval(function(){m.closed&&(clearInterval(e),je(function(){var e=Ce(a);e&&Oe(e,"style",""),"anonymous"!==Pe()&&De(Ce(p)),null!==r?A.commentNew(r,o.commenterToken,function(){A.loginBoxClose()}):A.loginBoxClose()}))},250)}else Ye(o.message)},(t=new XMLHttpRequest).open("GET",o,!0),t.onload=function(){n(JSON.parse(t.response))},t.send(null)},A.popupRender=function(n){var e=Ce(H),o=Ee("div"),t=Ee("div"),i=Ee("div"),r=Ee("div"),m=Ee("hr"),a=Ee("div"),c=Ee("div"),l=Ee("div"),d=Ee("hr"),s=Ee("div"),u=Ee("div"),p=Ee("div"),v=Ee("input"),f=Ee("button"),h=Ee("div"),g=Ee("a"),x=Ee("div"),b=Ee("a"),w=Ee("div");o.id=T,s.id=C,v.id=L,f.id=M,h.id=S,x.id=B,i.id=E,t.id=N,m.id=D,a.id=R,c.id=O,d.id=I,Be(e,"login-box-container"),Be(o,"login-box"),Be(s,"login-box-subtitle"),Be(u,"email-container"),Be(p,"email"),Be(v,"input"),Be(f,"email-button"),Be(h,"forgot-link-container"),Be(g,"forgot-link"),Be(x,"login-link-container"),Be(b,"login-link"),Be(t,"login-box-subtitle"),Be(i,"oauth-buttons-container"),Be(r,"oauth-buttons"),Be(a,"login-box-subtitle"),Be(c,"oauth-buttons-container"),Be(l,"oauth-buttons"),Be(w,"login-box-close"),Be(ce,"root-min-height"),g.innerText="Forgot your password?",b.innerText="Don't have an account? Sign up.",s.innerText="Login with your email address",f.innerText="Continue",a.innerText="Proceed with social login",t.innerText="Proceed with "+parent.location.host+" authentication",Re(f,A.passwordAsk,n),Re(g,A.forgotPassword,n),Re(b,A.popupSwitch,n),Re(w,A.loginBoxClose),Oe(e,"style","display: none; opacity: 0;"),Oe(v,"name","email"),Oe(v,"placeholder","Email address"),Oe(v,"type","text");var k=0;if(["google","twitter","github","gitlab"].forEach(function(e){if(we[e]){var o=Ee("button");Be(o,"button"),Be(o,e+"-button"),o.innerText=e,Re(o,A.commentoAuth,{provider:e,id:n}),Me(l,o),k++}}),we.sso){var y=Ee("button");Be(y,"button"),Be(y,"sso-button"),y.innerText="Single Sign-On",Re(y,A.commentoAuth,{provider:"sso",id:n}),Me(r,y),Me(i,r),Me(o,t),Me(o,i),(0<k||we.commento)&&Me(o,m)}ye=0<k&&(Me(o,a),Me(c,l),Me(o,c),!0),Me(p,v),Me(p,f),Me(u,p),Me(h,g),Me(x,b),0<k&&we.commento&&Me(o,d),we.commento&&(Me(o,s),Me(o,u),Me(o,h),Me(o,x)),Me(o,w),ke="login",e.innerHTML="",Me(e,o)},A.forgotPassword=function(){window.open("","_blank").location=me+"/forgot?commenter=true",A.loginBoxClose()},A.popupSwitch=function(e){var o=Ce(C);ye&&(De(Ce(O)),De(Ce(R)),De(Ce(D)),De(Ce(I))),we.sso&&(De(Ce(E)),De(Ce(N)),De(Ce(D)),De(Ce(I))),De(Ce(B)),De(Ce(S)),o.innerText="Create an account",ke="signup",A.passwordAsk(e),Ce(L).focus()},A.login=function(e){var o=Ce(L),n=Ce(v);oo(o.value,n.value,e)},A.signup=function(o){var n=Ce(L),e=Ce(f),t=Ce(h),i=Ce(v),r={email:n.value,name:e.value,website:t.value,password:i.value};Ie(me+"/api/commenter/new",r,function(e){if(!e.success)return A.loginBoxClose(),void Ye(e.message);Fe(),oo(n.value,i.value,o)})},A.passwordAsk=function(e){var o,n,t,i,r=Ce(T),m=Ce(C);De(Ce(M)),De(Ce(B)),De(Ce(S)),ye&&0<we.length&&(De(Ce(D)),De(Ce(I)),De(Ce(R)),De(Ce(O))),i="signup"===ke?(o=["name","website","password"],n=[f,h,v],t=["text","text","password"],["Real Name","Website (Optional)","Password"]):(o=["password"],n=[v],t=["password"],["Password"]),m.innerText="signup"===ke?"Finish the rest of your profile to complete.":"Enter your password to log in.";for(var a=0;a<o.length;a++){var c=Ee("div"),l=Ee("div"),d=Ee("input");if(d.id=n[a],Be(c,"email-container"),Be(l,"email"),Be(d,"input"),Oe(d,"name",o[a]),Oe(d,"type",t[a]),Oe(d,"placeholder",i[a]),Me(l,d),Me(c,l),"password"===o[a]){var s=Ee("button");Be(s,"email-button"),s.innerText=ke,Re(s,"signup"===ke?A.signup:A.login,e),Me(l,s)}Me(r,c)}"signup"===ke?Ce(f).focus():Ce(v).focus()},A.threadLockToggle=function(){var e=Ce(x);ge=!ge,e.disabled=!0,n(function(){e.disabled=!1,o()})},A.commentSticky=function(o){if("none"!==xe){var e=Ce(Z+xe);null===e?xe="none":(Ne(e,"option-unsticky"),Be(e,"option-sticky"))}xe=xe===o?"none":o,n(function(){var e=Ce(Z+o);xe===o?(Ne(e,"option-sticky"),Be(e,"option-unsticky")):(Ne(e,"option-unsticky"),Be(e,"option-sticky"))})},A.loadCssOverride=function(){void 0===t?A.allShow():We(t,"window.commento.allShow()")},A.allShow=function(){var e=Ce(u),o=Ce(g),n=Ce(a);Oe(e,"style",""),ve&&Oe(o,"style",""),n&&Oe(n,"style","")},A.loginBoxClose=function(){var e=Ce(u),o=Ce(H);Ne(e,"blurred"),Ne(ce,"root-min-height"),Oe(o,"style","display: none")},A.loginBoxShow=function(e){var o=Ce(u),n=Ce(H);A.popupRender(e),Be(o,"blurred"),Oe(n,"style",""),window.location.hash=H,Ce(L).focus()};var no=!(A.main=function(a){if(null!==(ce=Ce(s))){var e,o,n;null===Te&&(Te=ce.getBoundingClientRect().width<450),Be(ce,"root"),"true"!==d&&Be(ce,"root-font"),(e=Ee("div")).id=H,Me(ce,e),(o=Ee("div")).id=b,Be(o,"error-box"),Oe(o,"style","display: none;"),Me(ce,o),(n=Ee("div")).id=u,Be(n,"main-area"),Oe(n,"style","display: none"),Me(ce,n);var t,i,r,m,c=(t=Ee("div"),i=Ee("div"),r=Ee("a"),m=Ee("span"),t.id="commento-footer",Be(t,"footer"),Be(i,"logo-container"),Be(r,"logo"),Be(m,"logo-text"),Oe(r,"href","https://commento.io"),Oe(r,"target","_blank"),m.innerText="Commento",Me(r,m),Me(i,r),Me(t,i),t);We(ae+"/css/commento.css","window.commento.loadCssOverride()"),je(function(){var o,e;o=function(){var e,o,n,t,i,r,m;e=Ee("div"),o=Ee("button"),e.id=g,o.id=x,Be(e,"mod-tools"),o.innerHTML=ge?"Unlock Thread":"Lock Thread",Re(o,A.threadLockToggle),Oe(e,"style","display: none"),Me(e,o),Me(ce,e),n=function(){!function(){var o,n={},e=Ce(w);de.forEach(function(e){(o=e.parentHex)in n||(n[o]=[]),e.creationDate=new Date(e.creationDate),n[o].push(e),se[e.commentHex]={html:e.html,markdown:e.markdown}});var t=$e(n,"root");t&&Me(e,t)}(),Me(ce,c),function(){if(window.location.hash)if(window.location.hash.startsWith("#commento-")){var e=Ce(q+window.location.hash.split("-")[1]);if(null===e)return;Be(e,"highlighted-card"),e.scrollIntoView(!0)}else window.location.hash.startsWith("#commento")&&ce.scrollIntoView(!0)}(),A.allShow(),function(){for(var e=l.getElementsByClassName("commento-name"),o=0;o<e.length;o++)Oe(e[o],"style","max-width: "+(e[o].getBoundingClientRect().width+20)+"px;")}(),Ue(a)},t=Ee("div"),i=Ee("div"),r=Ce(u),m=Ee("div"),t.id=p,m.id=w,Be(t,"login"),Be(i,"login-text"),Be(m,"comments"),i.innerText="Login",m.innerHTML="",Re(i,A.loginBoxShow,null),Me(t,i),ge||fe?le||he?(Me(r,Xe("This thread is locked. You cannot add new comments.")),De(Ce(p))):(Me(r,t),Me(r,Ve("root"))):(le?De(Ce(p)):Me(r,t),Me(r,Ve("root"))),Me(r,m),Me(ce,r),Ue(n)},e={commenterToken:Pe(),domain:parent.location.host,path:parent.location.pathname},Ie(me+"/api/comment/list",e,function(e){e.success?(Fe(),pe=e.requireIdentification,ve=e.isModerator,fe=e.isFrozen,ge=e.attributes.isLocked,xe=e.attributes.stickyCommentHex,de=e.comments,ue=Object.assign({},ue,e.commenters),we=e.configuredOauths,Ue(o)):Ye(e.message)})})}else console.log("[commento] error: no root element with ID '"+s+"' found")});function to(){no||(no=!0,e(),"true"===i||void 0===i?A.main(void 0):"false"!==i&&console.log("[commento] error: invalid value for data-auto-init; allowed values: true, false"))}var io=function(){var e=l.readyState;"loading"===e?l.addEventListener("readystatechange",io):"interactive"===e?to():"complete"===e&&to()};io()}(window.commento,document);